# EffectiveJava笔记

## 第一章  引言

几个重要原则

* 清晰性和简洁性最为重要

* 组件(Component) 指任何可重用的软件元素，组件要尽可能小

* 组件之间的依赖性应尽可能降到最小

* 错误应该尽早被检测出来

  http://joshbloch.com/effectivejava.提供完整示例

  

java语言支持四种类型：

* 接口（包括注释）

* 类（包括enum）

* 数组

* 基本类型

  类、接口、构造器、成员以及序列化形式被统称为API元素

  

## 第二章  创建和销毁对象

### 1. 用静态工厂方法代替构造器

### 2. 遇到多个构造器参数时要考虑使用构建器

### 3. 用私有构造器或者枚举类型强化Singleton属性

### 4. 通过私有构造器强化不可实例的能力

### 5. 优先考虑依赖注入来引用资源

### 6. 避免创建不必要的对象

### 7. 消除过期的对象引用

### 8. 避免使用终结方法( finalizer )和清除方法( cleaner )

### 9. try-with-resources 优先于 try-finally

## 第三章 对于所有对象都通用的方法

### 10. 覆盖equals时请遵守通用约定

### 11. 覆盖equals时总要覆盖hashCode

### 12. 始终要覆盖toString

### 13. 谨慎地覆盖clone

### 14. 考虑实现Comparable接口

## 第四章 类和接口

### 15. 使类和成员的可访问性最小化

封装 [信息隐藏]：把API和实现清晰的隔离开，组件之间只通过API通信。
好处：解耦，模块独立开发、测试、优化、使用、理解、修改。并发开发。组件单独优化。降低构建大型系统的风险。

成员（域、方法、嵌套类、嵌套接口）有四种可能的访问级别：

1. 私有的
2. 包级私有
3. 受保护的
4. 共有的

Java9 新增2种隐式访问级别：

1. 模块系统

类实现接口，类中实现接口的方法都必须声明为共有。

共有类的可变实例成员变量不能是共有的。

### 16. 要在共有类而非共有域中使用访问方法

### 17. 使可变性最小化

Java平台类库中包含许多不可变的类(其实例不能被修改的类)：

String、基本类型的包装类、BigInter、BigDecimal

不可变类好处：易于设计、实现、使用。安全

不可变对象可以只有一种状态，即被创建时的状态。

不可变对象本质上是线程安全的，它们不需要同步。，

不可变对象可以被自由地共享。永远不需要进行保护性拷贝。

不可变类的使用：

1. 对于频繁用到的值，提供共有静态final常量
2. 提供一些静态工厂。

不可变对象唯一的缺点是，对于每个不同的值都需要一个单独的对象。

### 18. 复合（组合）由于继承

HashSet的addAll方法是在它的add方法上实现的。

复合：不扩展现有的类，而是在新的类中增加一个私有域，它引用现有类的一个实例。

继承机制会把超类API中的所有缺陷传播到子类中，而复合则允许设计新的API来隐藏这些缺陷。

### 19. 要么设计继承并提供文档说明，要么禁止继承

好的API文档应该描述一个给定的方法做了什么工作，而不是描述它是如何做到的。

通过构造器调用 私有的方法、final方法、和静态方法是安全的，因为这些方法都不能被子类覆盖。

继承设计的类中，如果实现Cloneable、Serrializable接口，无论是clone还是readObject，无论间接还是直接，都不能调用可覆盖的方法。因为clone和readObject方法在行为上非常类似于构造器。

禁止子类化的两种方法：

1. 将类声明为final
2. 把所有构造器变为私有的，或包级私有，并增加一些共有的静态工厂来替代构造器

### 20. 接口优于抽象类

接口是定义mixin（混合类型）的理性选择。表明它提供了某些可供选择的行为。

minxin：它允许任选的功能混合到类型的主要功能中去。

接口允许构造非层次结构的类型框架。

接口使得安全地增强类的功能成为可能。

骨架实现类：抽象类继承接口。为了继承的目的而设计的。

### 21. 为后代设计接口

尽量避免在已有接口上添加新的默认方法。

但是，在创建接口时，用默认方法提供标准的方法实现，可以简化接口实现的任务。

### 22. 接口只用于定义类型

类实现接口，就可以用接口的类型作为类实例引用的类型。

常量接口模式是对接口的不良使用。

导出常量的三种方式：

1. 使用枚举类型
2. 使用不可实例化的工具类
3. 利用静态导入

### 23. 类层次优于标签类

### 24. 静态成员类优于非静态成员类

四种嵌套类，除第1种外，其他均为内部类

1. 静态成员类
2. 非静态成员类
3. 匿名类
4. 局部类

### 25. 限制源文件为单个顶级类

## 第五章 泛型

### 26. 请不要使用原生态类型

定义

泛型类/接口：声明中含有一个或多个类型参数的类或者接口。泛型类和接口统称为泛型。





















### 

### 